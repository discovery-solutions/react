(function(e,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(e=typeof globalThis<"u"?globalThis:e||self,f(e["@dscvr-solutions/react"]={}))})(this,function(e){"use strict";const f={},d=new Map;e.currentComponentInstance=null;const C=(c,t)=>{class n extends HTMLElement{constructor(){super(...arguments),this.props={}}static get observedAttributes(){return["*"]}connectedCallback(){this.props=this.parseAttributes(),f[c]=this;const s=d.get(this);s&&(s.index=0),e.currentComponentInstance=this;const r=t.call(this,this.props);e.currentComponentInstance=null,r.setAttribute("data-reactive",c),this.innerHTML="",this.appendChild(r)}attributeChangedCallback(){this.props=this.parseAttributes(),this.connectedCallback()}parseAttributes(){const s={};for(const{name:r,value:o}of Array.from(this.attributes))if(r.startsWith("data-")){const i=r.replace(/^data-/,"");try{s[i]=JSON.parse(o.replace(/'/g,'"'))}catch{s[i]=o}}return s}}customElements.define(c,n)};window.React={functions:{}};const v=(c,...t)=>{var r,o;const n=c.reduce((i,b,I)=>{let a=t[I];if(typeof a=="function"){const l=`fn_${Math.random().toString(36).substring(2,15)}`;window.React.functions[l]=a,a=`window.React.functions.${l}()`}if(Array.isArray(a)&&(a=a.reduce((l,h)=>(l+=h.outerHTML,l),"")),typeof a=="object"&&a!==null)try{a=JSON.stringify(a,(l,h)=>l==="exclude"?void 0:h),a=a.replace(/"/g,"'")}catch{return console.warn("Circular reference detected in:",a),i+b}return i+b+(a||"")},""),u=document.createElement("template");u.innerHTML=n.trim();const s=u.content.firstChild;for(let i=0;i<t.length;i++)((o=(r=t[i])==null?void 0:r.constructor)==null?void 0:o.name)==="Ref"&&(t[i].current=s);return s},w=c=>{const t=new Set;let n=c;return{get:()=>n,set:o=>{o!==n&&(n=o,t.forEach(i=>i(o)))},subscribe:o=>(t.add(o),()=>t.delete(o))}},g=(c,t)=>{if(!e.currentComponentInstance)throw new Error("useEffect must be used within a component.");d.has(e.currentComponentInstance)||d.set(e.currentComponentInstance,{states:[],index:0});const n=d.get(e.currentComponentInstance),u=n.index;n.states[u]===void 0&&(n.states[u]={deps:void 0,cleanup:void 0});const s=n.states[u];n.index++,(!s.deps||t.length!==s.deps.length?!0:t.some((o,i)=>o!==s.deps[i]))&&(s.cleanup&&s.cleanup(),s.cleanup=c()||void 0,s.deps=t)},E=c=>{if(!e.currentComponentInstance)throw new Error("useState must be used within a component.");d.has(e.currentComponentInstance)||d.set(e.currentComponentInstance,{states:[],index:0});const t=d.get(e.currentComponentInstance),n=t.index;t.index++,t.states[n]===void 0&&(t.states[n]=c);const u=()=>Object.values(f).forEach(r=>r.connectedCallback()),s=r=>{t.states[n]=r,u()};return[t.states[n],s]},R=c=>({current:c});class p extends HTMLElement{connectedCallback(){window.onpopstate=()=>this.updateRoute(),this.updateRoute()}updateRoute(){var n;const t=window.location.pathname;this.innerHTML=((n=this.querySelector(`[data-route="${t}"]`))==null?void 0:n.innerHTML)||"404 Not Found"}}customElements.define("reactive-router",p);class m extends HTMLElement{connectedCallback(){this.addEventListener("click",t=>{t.preventDefault();const n=this.getAttribute("href");n&&(window.history.pushState({},"",n),window.dispatchEvent(new Event("popstate")))})}}customElements.define("reactive-link",m),e.Components=f,e.ReactiveLink=m,e.ReactiveRouter=p,e.componentStates=d,e.createReactiveState=w,e.register=C,e.render=v,e.useEffect=g,e.useRef=R,e.useState=E,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
