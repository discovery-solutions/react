(function(e,d){typeof exports=="object"&&typeof module<"u"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(e=typeof globalThis<"u"?globalThis:e||self,d(e["@dscvr-solutions/react"]={}))})(this,function(e){"use strict";const d={},a=new Map;e.currentComponentInstance=null;const p=(o,t)=>{class n extends HTMLElement{connectedCallback(){d[o]=this;const s=a.get(this);s&&(s.index=0),e.currentComponentInstance=this;const c=t.call(this);e.currentComponentInstance=null,c.setAttribute("data-reactive",o),this.innerHTML="",this.appendChild(c)}}customElements.define(o,n)};window.React={functions:{}};const C=(o,...t)=>{const n=o.reduce((c,i,f)=>{let u=t[f];if(typeof u=="function"){const l=`fn_${Math.random().toString(36).substring(2,15)}`;window.React.functions[l]=u,u=`window.React.functions.${l}()`}return Array.isArray(u)&&(u=u.reduce((l,R)=>(l+=R.outerHTML,l),"")),typeof u=="object"?c+i:c+i+u},""),r=document.createElement("template");r.innerHTML=n.trim();const s=r.content.firstChild;for(let c=0;c<t.length;c++)t[c].constructor.name==="Ref"&&(t[c].current=s);return s},w=o=>{const t=new Set;let n=o;return{get:()=>n,set:i=>{i!==n&&(n=i,t.forEach(f=>f(i)))},subscribe:i=>(t.add(i),()=>t.delete(i))}},v=(o,t)=>{if(!e.currentComponentInstance)throw new Error("useEffect must be used within a component.");a.has(e.currentComponentInstance)||a.set(e.currentComponentInstance,{states:[],index:0});const n=a.get(e.currentComponentInstance),r=n.index;n.states[r]===void 0&&(n.states[r]={deps:void 0,cleanup:void 0});const s=n.states[r];n.index++,(!s.deps||t.length!==s.deps.length?!0:t.some((i,f)=>i!==s.deps[f]))&&(s.cleanup&&s.cleanup(),s.cleanup=o()||void 0,s.deps=t)},b=o=>{if(!e.currentComponentInstance)throw new Error("useState must be used within a component.");a.has(e.currentComponentInstance)||a.set(e.currentComponentInstance,{states:[],index:0});const t=a.get(e.currentComponentInstance),n=t.index;t.index++,t.states[n]===void 0&&(t.states[n]=o);const r=()=>Object.values(d).forEach(c=>c.connectedCallback()),s=c=>{t.states[n]=c,r()};return[t.states[n],s]},E=o=>({current:o});class h extends HTMLElement{connectedCallback(){window.onpopstate=()=>this.updateRoute(),this.updateRoute()}updateRoute(){var n;const t=window.location.pathname;this.innerHTML=((n=this.querySelector(`[data-route="${t}"]`))==null?void 0:n.innerHTML)||"404 Not Found"}}customElements.define("reactive-router",h);class m extends HTMLElement{connectedCallback(){this.addEventListener("click",t=>{t.preventDefault();const n=this.getAttribute("href");n&&(window.history.pushState({},"",n),window.dispatchEvent(new Event("popstate")))})}}customElements.define("reactive-link",m),e.Components=d,e.ReactiveLink=m,e.ReactiveRouter=h,e.componentStates=a,e.createReactiveState=w,e.register=p,e.render=C,e.useEffect=v,e.useRef=E,e.useState=b,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
