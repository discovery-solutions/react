(function(e,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(e=typeof globalThis<"u"?globalThis:e||self,u(e["@dscvr-solutions/react"]={}))})(this,function(e){"use strict";const u={},d=new Map;e.currentComponentInstance=null;const p=(c,t)=>{class n extends HTMLElement{connectedCallback(){u[c]=this;const r=d.get(this);r&&(r.index=0),e.currentComponentInstance=this;const o=t.call(this);e.currentComponentInstance=null,o.setAttribute("data-reactive",c),this.innerHTML="",this.appendChild(o)}}customElements.define(c,n)};window.React={functions:{}};const w=(c,...t)=>{const n=c.reduce((o,s,l)=>{let a=t[l];if(typeof a=="function"){const f=`fn_${Math.random().toString(36).substring(2,15)}`;window.React.functions[f]=a,a=`window.React.functions.${f}()`}return Array.isArray(a)&&(a=a.reduce((f,E)=>(f+=E.outerHTML,f),"")),typeof a=="object"?o+s:o+s+a},""),i=document.createElement("template");i.innerHTML=n.trim();const r=i.content.firstChild;for(let o=0;o<t.length;o++)t[o].constructor.name==="Ref"&&(t[o].current=r);return r},R=c=>{const t=new Set;let n=c;return{get:()=>n,set:s=>{s!==n&&(n=s,t.forEach(l=>l(s)))},subscribe:s=>(t.add(s),()=>t.delete(s))}},b=(c,t)=>{let n;(()=>{n&&n(),n=c()})()},v=c=>{if(!e.currentComponentInstance)throw new Error("useState must be used within a component.");d.has(e.currentComponentInstance)||d.set(e.currentComponentInstance,{states:[],index:0});const t=d.get(e.currentComponentInstance),n=t.index;t.index++,t.states[n]===void 0&&(t.states[n]=c);const i=()=>Object.values(u).forEach(o=>o.connectedCallback()),r=o=>{t.states[n]=o,console.log(i),i()};return[t.states[n],r]},C=c=>({current:c});class m extends HTMLElement{connectedCallback(){window.onpopstate=()=>this.updateRoute(),this.updateRoute()}updateRoute(){var n;const t=window.location.pathname;this.innerHTML=((n=this.querySelector(`[data-route="${t}"]`))==null?void 0:n.innerHTML)||"404 Not Found"}}customElements.define("reactive-router",m);class h extends HTMLElement{connectedCallback(){this.addEventListener("click",t=>{t.preventDefault();const n=this.getAttribute("href");n&&(window.history.pushState({},"",n),window.dispatchEvent(new Event("popstate")))})}}customElements.define("reactive-link",h),e.Components=u,e.ReactiveLink=h,e.ReactiveRouter=m,e.componentStates=d,e.createReactiveState=R,e.register=p,e.render=w,e.useEffect=b,e.useRef=C,e.useState=v,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
